# Snow Crew

MVP Telegram-бот для горнолыжников и сноубордистов: профиль, подбор снаряжения, склоны рядом и поиск компании.

## Архитектура
- **Bot слой**: `bot.py` — обработчики, FSM, клавиатуры и сценарии.
- **Доступ к данным**: `db.py` — все SQL-операции и инициализация БД.
- **Сервисы**: `services/` — расчёты и утилиты (дистанции, калькуляторы).
- **FSM состояния**: `states.py`.
- **UI**: `keyboards.py` — Reply/Inline клавиатуры.

## Логика бота (сценарии)
- **Главное меню** — ReplyKeyboard с 5 разделами.
- **Профиль** — пошаговый мастер (фото опционально), хранение в SQLite.
- **Склоны рядом** — запрос геолокации, расчёт дистанции, ТОП-5.
- **Поиск компании** — форма фильтров, показ анкет по одной, лайк/пропуск.
- **Калькулятор** — отдельные ветки для сноуборда и лыж.

## Структура файлов
- `bot.py` — точка входа и обработчики.
- `config.py` — конфигурация.
- `db.py` — SQLite и SQL.
- `keyboards.py` — клавиатуры.
- `states.py` — FSM.
- `services/equipment.py` — калькуляторы.
- `services/resorts.py` — расчёт расстояний.
- `requirements.txt` — зависимости.

## Масштабирование SQLite → PostgreSQL
- Вся работа с БД изолирована в `db.py`.
- SQL максимально совместим, без специфичных для SQLite функций.
- Для миграции заменить `aiosqlite` на async Postgres драйвер (например `asyncpg`)
  и переиспользовать методы `Database`.

## Быстрый старт
1. Создать `.env`:
```
BOT_TOKEN=ваш_токен
DATABASE_PATH=bot.db
```
2. Установить зависимости:
```
pip install -r requirements.txt
```
3. Запустить:
```
python bot.py
```
